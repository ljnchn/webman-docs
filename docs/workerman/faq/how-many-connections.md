# Workerman支持多少并发

**并发**概念太模糊，这里以两种可以量化的指标**并发连接数**和**并发请求数**来说明。

**并发连接数**是指服务器当前时刻一共维持了多少TCP连接，而这些连接上是否有数据通讯并不关注，例如一台消息推送服务器上可能维持了百万的设备连接，由于连接上很少有数据通讯，所以这台服务器上负载可能几乎为0，只要内存足够，还可以继续接受连接。

**并发请求数**一般用QPS（服务器每秒处理多少请求）来衡量，而当前时刻服务器上有多少个tcp连接并不十分关注。例如一台服务器只有10个客户端连接，每个客户端连接上每秒有1W个请求，那么要求服务端需要至少能支撑10*1W=10W每秒的吞吐量（QPS）。假设10W吞吐量每秒是这台服务器的极限，如果每个客户端每秒发送1个请求给服务端，那么这台服务器能够支撑10W个客户端。

**并发连接数**受限于服务器内存，一般24G内存workerman服务器可以支持大概**120W**并发连接。

**并发请求数**受限于服务器cpu处理能力，一台24核workerman服务器可以达到**45W**每秒的吞吐量(QPS)，实际值根据业务复杂度以及代码质量有所变化。

## 注意

高并发场景必须安装event扩展，参考安装配置章节。另外需要优化linux内核，尤其是进程打开文件数限制，请参考附录内核调优章节。

## 压测数据 
> 数据来自第三方权威压测机构 techempower.com 第20轮压测
https://www.techempower.com/benchmarks/#section=data-r20&hw=ph&test=db&l=zik073-sf

**服务器配置：**
Total Cores 14, Total Threads 28, 32 GB of memory, Dedicated Cisco 10-gigabit Ethernet switch
**业务逻辑：**
带数据库查询业务，数据库pgsql，php8+jit
QPS为39万+
![](../images/screenshot_1636522357217.png)



