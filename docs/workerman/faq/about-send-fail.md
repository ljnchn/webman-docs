# status里send_fail原因
**现象：**

运行status命令，看到有send_fail的情况，是什么原因？

**答：**

有send_fail通常来说不是什么大问题，一般是由于客户端主动关闭连接或者客户端无法接收数据导致的数据发送失败。

send_fail有两种原因

1、调用send接口向客户端发送数据时发现客户端已经断开，则send_fail计数加1。由于是客户端主动断开的，属于正常现象，一般可以忽略。

2、服务端发送数据的速度大于客户端接收速度，导致数据不断的积压在服务端缓冲区（workerman为每个客户端建立了一个发送缓冲区），如果缓冲区大小超过限值（TcpConnection::$maxSendBufferSize默认1M）则会被丢弃，触发onError事件（如果有的话），并导致send_fail计数加1。

例如浏览器最小化后js可能会暂停运行，导致浏览器暂停接收服务端数据，数据长时间积压在缓冲区，超过限制后每次调用send都会导致send_fail计数加1。

**总结：**

由于客户端断开连接导致的`send_fail`一般不用担心。

如果是由于客户端停止接收数据导致的send_fail需要检查下客户端是否正常。

如果客户端接收数据速度**持续**低于服务端发送速度，需要考虑优化业务流程，或者优化客户端性能。如果是带宽导致发送不畅可以考虑增加服务器带宽。
